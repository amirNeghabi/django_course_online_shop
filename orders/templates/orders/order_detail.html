{% extends '_base.html' %}
{% load humanize %}

{% block page_title %}Ø¬Ø²Ø¦ÛŒØ§Øª Ø³ÙØ§Ø±Ø´ #{{ order.id }}{% endblock %}

{% block content %}
<div style="padding:50px 20px; max-width:1000px; margin:auto; font-family:IRANSans, sans-serif;">

    <!-- Ø¹Ù†ÙˆØ§Ù† Ø³ÙØ§Ø±Ø´ -->
    <h2 style="text-align:center; font-size:30px; font-weight:700; color:#4a5568; margin-bottom:40px;">
        Ø¬Ø²Ø¦ÛŒØ§Øª Ø³ÙØ§Ø±Ø´ #{{ order.id }}
    </h2>

    <!-- Ú©Ø§Ø±Øª Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø± -->
    <div style="background:white; border-radius:16px; padding:30px; box-shadow:0 8px 20px rgba(0,0,0,0.08); margin-bottom:40px;">
        <h3 style="margin-bottom:20px; color:#667eea; font-weight:700;">Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø®Ø±ÛŒØ¯Ø§Ø±</h3>

        <div style="display:flex; flex-direction:column; gap:12px; font-size:16px; color:#4a5568;">
            <div><strong>Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ:</strong> {{ order.first_name }} {{ order.last_name }}</div>
            <div><strong>Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³:</strong> {{ order.phone_number }}</div>
            <div><strong>Ø¢Ø¯Ø±Ø³:</strong> {{ order.address }}</div>
            <div><strong>ÛŒØ§Ø¯Ø¯Ø§Ø´Øª Ø³ÙØ§Ø±Ø´:</strong> {{ order.order_notes|default:"Ù†Ø¯Ø§Ø±Ø¯" }}</div>
            <div><strong>ÙˆØ¶Ø¹ÛŒØª Ù¾Ø±Ø¯Ø§Ø®Øª:</strong>
                {% if order.is_paid %}
                    <span style="color:#28a745; font-weight:700;">Ù¾Ø±Ø¯Ø§Ø®Øª Ø´Ø¯Ù‡</span>
                {% else %}
                    <span style="color:#dc3545; font-weight:700;">Ù¾Ø±Ø¯Ø§Ø®Øª Ù†Ø´Ø¯Ù‡</span>
                {% endif %}
            </div>
        </div>
    </div>

    <!-- Ú©Ø§Ø±Øª Ù…Ø­ØµÙˆÙ„Ø§Øª -->
    <h3 style="margin-bottom:20px; color:#667eea; font-weight:700;">Ù…Ø­ØµÙˆÙ„Ø§Øª Ø³ÙØ§Ø±Ø´</h3>
    <div style="display:flex; flex-direction:column; gap:20px;">

        {% for item in items %}
        <div style="display:flex; justify-content:space-between; align-items:center; background:white; border-radius:14px; padding:20px; box-shadow:0 4px 15px rgba(0,0,0,0.05); transition: all 0.2s; gap:20px;">
            
            <!-- ØªØµÙˆÛŒØ± Ù…Ø­ØµÙˆÙ„ -->
            <div style="flex-shrink:0;">
                {% if item.product.image %}
                    <img src="{{ item.product.image.url }}" alt="{{ item.product.title }}" style="width:90px; height:90px; object-fit:cover; border-radius:12px; border:1px solid #e2e8f0;">
                {% else %}
                    <div style="width:90px; height:90px; background:#e9ecef; border-radius:12px; display:flex; align-items:center; justify-content:center; font-size:30px; color:#6c757d;">ğŸ“¦</div>
                {% endif %}
            </div>

            <!-- Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù…Ø­ØµÙˆÙ„ -->
            <div style="flex:1; display:flex; flex-direction:column; justify-content:center; gap:8px;">
                <div style="font-weight:700; font-size:17px; color:#2d3748;">{{ item.product.title }}</div>
                <div style="color:#4a5568; font-size:14px;">ØªØ¹Ø¯Ø§Ø¯: {{ item.quantity }}</div>
            </div>

            <!-- Ù‚ÛŒÙ…Øª Ùˆ Ø¬Ù…Ø¹ -->
            <div style="text-align:right; display:flex; flex-direction:column; gap:4px;">
                <div style="font-weight:600; color:#667eea;">Ù‚ÛŒÙ…Øª ÙˆØ§Ø­Ø¯: {{ item.price|intcomma }} ØªÙˆÙ…Ø§Ù†</div>
                <div style="font-weight:700; color:#28a745;">Ø¬Ù…Ø¹: {{ item.total|intcomma }} ØªÙˆÙ…Ø§Ù†</div>
            </div>
        </div>
        {% empty %}
            <p style="text-align:center; color:#6c757d;">Ø§ÛŒÙ† Ø³ÙØ§Ø±Ø´ Ù‡ÛŒÚ† Ù…Ø­ØµÙˆÙ„ÛŒ Ù†Ø¯Ø§Ø±Ø¯.</p>
        {% endfor %}

    </div>

    <!-- Ø¬Ù…Ø¹ Ú©Ù„ Ø³ÙØ§Ø±Ø´ -->
    <div style="margin-top:30px; text-align:right; font-size:20px; font-weight:700; color:#2d3748;">
        Ù…Ø¬Ù…ÙˆØ¹ Ø³ÙØ§Ø±Ø´: <span style="color:#28a745;">{{ order.get_total_price|intcomma }} ØªÙˆÙ…Ø§Ù†</span>
    </div>

    <!-- Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ -->
    <div style="margin-top:40px; display:flex; justify-content:center; gap:20px; flex-wrap:wrap;">
        <a href="{% url 'product_list' %}" style="padding:14px 30px; background:linear-gradient(135deg,#667eea 0%,#764ba2 100%); color:white; border-radius:10px; font-weight:600; text-decoration:none; transition:all 0.3s;">
            Ø§Ø¯Ø§Ù…Ù‡ Ø®Ø±ÛŒØ¯
        </a>
        <a href="{% url 'order_list' %}" style="padding:14px 30px; background:white; color:#667eea; border:2px solid #667eea; border-radius:10px; font-weight:600; text-decoration:none; transition:all 0.3s;">
            Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø³ÙØ§Ø±Ø´â€ŒÙ‡Ø§
        </a>
    </div>

</div>
{% endblock %}
